<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ðŸ’˜ Will You Be My Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  body{
    margin:0;
    min-height:100vh;
    display:grid;
    place-items:center;
    font-family:"Poppins",sans-serif;
    background:
      radial-gradient(circle at 20% 20%, #ffd1e6, transparent 40%),
      radial-gradient(circle at 80% 0%, #ffc0d9, transparent 45%),
      linear-gradient(180deg,#ffe4ef,#fff0f6);
    overflow:hidden;
  }

  .card{
    width:min(560px,92vw);
    background:rgba(255,255,255,0.9);
    border-radius:24px;
    padding:28px 22px;
    box-shadow:0 18px 50px rgba(255,105,180,0.25);
    text-align:center;
  }

  h1{
    font-family:"Pacifico",cursive;
    font-size:clamp(30px,5vw,42px);
    color:#ff2e7a;
    margin:6px 0 12px;
    text-shadow:0 4px 12px rgba(255,0,128,0.18);
  }

  p{
    margin:0 0 16px;
    color:#b33c70;
    font-weight:600;
  }

  .stage{
    position:relative;
    height:230px;
    border-radius:18px;
    background:linear-gradient(180deg,#ffe0ec,#fff4f8);
    border:2px dashed #ff9fc2;
    overflow:hidden;
  }

  .btn{
    border:none;
    padding:14px 22px;
    border-radius:999px;
    font-weight:800;
    font-size:16px;
    cursor:pointer;
    position:absolute;
    box-shadow:0 10px 22px rgba(255,0,120,.22);
    touch-action: manipulation;
    transition:transform .15s ease;
  }
  .btn:hover{ transform:scale(1.06); }
  .btn:active{ transform:scale(0.98); }

  #yesBtn{
    left:50%;
    top:60%;
    transform:translate(-120%,-50%);
    background:linear-gradient(45deg,#ff2e7a,#ff6aa7);
    color:white;
  }

  #noBtn{
    left:50%;
    top:60%;
    transform:translate(20%,-50%);
    background:#ffb6d2;
    color:#7a003b;
  }

  /* Page 2: full screen video */
  #page2{
    position:fixed;
    inset:0;
    display:none;
    background:#000;
    z-index:50;
  }

  #valVideo{
    width:100%;
    height:100%;
    object-fit:cover;
    transform: scale(0.92); /* unzoom a bit */
    transform-origin:center;
    display:block;
    background:#000;
  }

  #overlay{
    position:absolute;
    inset:0;
    display:flex;
    align-items:flex-end;
    padding:18px 16px;
    pointer-events:none;
    background:linear-gradient(to top,rgba(0,0,0,.65),transparent 60%);
  }

  #loveText{
    color:white;
    font-size:clamp(16px,4vw,22px);
    font-weight:800;
    text-shadow:0 4px 14px rgba(0,0,0,.55);
  }

  /* Tap-to-enable audio overlay */
  #tapSound{
    position:absolute;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    z-index:60;
    background:rgba(0,0,0,.35);
    backdrop-filter: blur(2px);
  }
  #tapSound .pill{
    background:rgba(255,255,255,.92);
    color:#ff2e7a;
    font-weight:900;
    padding:14px 18px;
    border-radius:999px;
    box-shadow:0 12px 30px rgba(0,0,0,.25);
  }
</style>
</head>

<body>
  <!-- PAGE 1 -->
  <div class="card" id="page1">
    <h1>Will you be my Valentine? ðŸ’˜</h1>
    <p>(There is only one correct choice ðŸ˜ŒðŸ’•)</p>

    <div class="stage" id="stage">
      <button id="yesBtn" class="btn">Yes ðŸ’–</button>
      <button id="noBtn" class="btn">No ðŸ™ˆ</button>
    </div>
  </div>

  <!-- PAGE 2 -->
  <div id="page2">
    <!-- Keep muted initially so autoplay works, then we unmute after YES -->
    <video id="valVideo" autoplay loop muted playsinline preload="auto">
      <source src="valentine.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <div id="tapSound"><div class="pill">Tap to turn sound on ðŸ”ŠðŸ’—</div></div>

    <div id="overlay">
      <div id="loveText">YAY!! ðŸ’– Iâ€™m so lucky to have you. Happy Valentineâ€™s, my love ðŸŒ¹ðŸ¥°</div>
    </div>
  </div>

<script>
  const stage = document.getElementById("stage");
  const noBtn  = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");

  const page1  = document.getElementById("page1");
  const page2  = document.getElementById("page2");

  const video  = document.getElementById("valVideo");
  const tapSound = document.getElementById("tapSound");

  // NO button dodge
  function moveNo(){
    const s = stage.getBoundingClientRect();
    const b = noBtn.getBoundingClientRect();
    const x = Math.random() * (s.width - b.width - 20) + 10;
    const y = Math.random() * (s.height - b.height - 20) + 10;
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
    noBtn.style.transform = "none";
  }
  noBtn.addEventListener("mouseenter", moveNo);
  noBtn.addEventListener("pointerdown", e => { e.preventDefault(); moveNo(); });

  async function showPage2AndStartVideoWithSound(){
    page1.style.display = "none";
    page2.style.display = "block";

    // Reload source after display switch
    video.load();

    // Autoplay muted first (usually allowed)
    try { await video.play(); } catch {}

    // Now attempt to turn sound on (this is still inside the YES click flow)
    video.muted = false;
    video.volume = 1.0;

    try {
      await video.play();
      tapSound.style.display = "none";
    } catch {
      // If unmuted play is blocked, show tap overlay
      tapSound.style.display = "flex";
      video.controls = true;
    }

    // Fullscreen attempt (Android yes; iOS limited)
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen().catch(()=>{});
    }
  }

  yesBtn.addEventListener("click", () => {
    showPage2AndStartVideoWithSound();
  });

  // If browser blocks unmuted playback, user tap will enable sound
  tapSound.addEventListener("pointerdown", async () => {
    video.muted = false;
    video.volume = 1.0;
    try {
      await video.play();
      tapSound.style.display = "none";
    } catch {}
  });
</script>
</body>
</html>
