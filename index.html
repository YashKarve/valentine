<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ðŸ’˜ Will You Be My Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:"Poppins",sans-serif;
  background:
    radial-gradient(circle at 20% 20%, #ffd1e6, transparent 40%),
    radial-gradient(circle at 80% 0%, #ffc0d9, transparent 45%),
    linear-gradient(180deg,#ffe4ef,#fff0f6);
  overflow:hidden;
}

.card{
  width:min(560px,92vw);
  background:rgba(255,255,255,0.9);
  border-radius:24px;
  padding:28px 22px;
  box-shadow:0 18px 50px rgba(255,105,180,0.25);
  text-align:center;
}

h1{
  font-family:"Pacifico",cursive;
  font-size:38px;
  color:#ff2e7a;
}

.stage{
  position:relative;
  height:230px;
  border-radius:18px;
  background:#ffe6f0;
  border:2px dashed #ff9fc2;
}

.btn{
  border:none;
  padding:14px 22px;
  border-radius:999px;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
  position:absolute;
}

#yesBtn{
  left:50%;
  top:60%;
  transform:translate(-120%,-50%);
  background:#ff2e7a;
  color:white;
}

#noBtn{
  left:50%;
  top:60%;
  transform:translate(20%,-50%);
  background:#ffb6d2;
}

#page2{
  position:fixed;
  inset:0;
  display:none;
  background:black;
  z-index:50;
}

#valVideo{
  width:100%;
  height:100%;
  object-fit:cover;
}

#overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  padding:20px;
  background:linear-gradient(to top,rgba(0,0,0,.6),transparent 60%);
}

#loveText{
  color:white;
  font-size:22px;
  font-weight:700;
}

#ytWrap{
  position:fixed;
  left:-9999px;
  top:-9999px;
  width:360px;
  height:240px;
}
</style>
</head>

<body>

<div class="card" id="page1">
  <h1>Will you be my Valentine? ðŸ’˜</h1>

  <div class="stage" id="stage">
    <button id="yesBtn" class="btn">Yes ðŸ’–</button>
    <button id="noBtn" class="btn">No ðŸ™ˆ</button>
  </div>
</div>

<div id="page2">
  <video id="valVideo" autoplay loop playsinline>
    <source src="valentine.mov" type="video/mp4">
  </video>
  <div id="overlay">
    <div id="loveText">
      YAY!! ðŸ’– Iâ€™m so lucky to have you. Happy Valentineâ€™s, my love ðŸŒ¹ðŸ¥°
    </div>
  </div>
</div>

<div id="ytWrap"><div id="ytPlayer"></div></div>

<script>
const stage = document.getElementById("stage");
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const page1 = document.getElementById("page1");
const page2 = document.getElementById("page2");
const video = document.getElementById("valVideo");

const YOUTUBE_VIDEO_ID = "lplaAZBWiqY";

function moveNo(){
  const s = stage.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();
  const x = Math.random()*(s.width-b.width-20)+10;
  const y = Math.random()*(s.height-b.height-20)+10;
  noBtn.style.left = x+"px";
  noBtn.style.top = y+"px";
  noBtn.style.transform="none";
}

noBtn.addEventListener("mouseenter",moveNo);
noBtn.addEventListener("pointerdown",e=>{
  e.preventDefault();
  moveNo();
});

function goToPage2(){
  page1.style.display="none";
  page2.style.display="block";

  video.play().catch(()=>{});

  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen().catch(()=>{});
  }
}

let ytPlayer=null;

function loadYouTube(){
  if(window.__ytLoaded) return;
  window.__ytLoaded=true;

  const tag=document.createElement("script");
  tag.src="https://www.youtube.com/iframe_api";
  document.head.appendChild(tag);
}

function createAndPlayYT(){
  loadYouTube();

  const start=()=>{
    if(!window.YT||!YT.Player){
      setTimeout(start,200);
      return;
    }

    if(!ytPlayer){
      ytPlayer=new YT.Player("ytPlayer",{
        videoId:YOUTUBE_VIDEO_ID,
        width:"360",
        height:"240",
        playerVars:{
          autoplay:1,
          controls:0,
          loop:1,
          playlist:YOUTUBE_VIDEO_ID,
          playsinline:1
        },
        events:{
          onReady:()=>{ ytPlayer.playVideo(); }
        }
      });
    }else{
      ytPlayer.playVideo();
    }
  };

  start();
}

yesBtn.addEventListener("click",()=>{
  goToPage2();
  createAndPlayYT();
});
</script>

</body>
</html>
